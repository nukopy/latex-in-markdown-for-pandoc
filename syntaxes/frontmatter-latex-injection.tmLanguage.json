{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "scopeName": "markdown.frontmatter.latex.injection",
  "injectionSelector": "L:text.html.markdown",
  "patterns": [
    {
      "include": "#frontmatter"
    }
  ],
  "repository": {
    "frontmatter": {
      "name": "meta.frontmatter.latex.block",
      "begin": "^(---)\\s*$",
      "beginCaptures": {
        "1": {
          "name": "punctuation.definition.front-matter.begin.markdown"
        }
      },
      "end": "^(---|\\.\\.\\.)\\s*$",
      "endCaptures": {
        "1": {
          "name": "punctuation.definition.front-matter.end.markdown"
        }
      },
      "patterns": [
        {
          "include": "#header-inline"
        },
        {
          "include": "#header-block"
        },
        {
          "include": "#option-inline"
        },
        {
          "include": "#option-block"
        },
        {
          "include": "#raw-fence"
        },
        {
          "include": "#latex-inline"
        }
      ]
    },
    "header-inline": {
      "name": "meta.frontmatter.latex.inline",
      "begin": "^(\\s*)(header-includes|include-in-header|include-before|include-before-body|include-after|include-after-body)\\s*:\\s*(?=\\S)",
      "beginCaptures": {
        "2": {
          "name": "support.type.property-name.yaml"
        }
      },
      "end": "$",
      "patterns": [
        {
          "include": "#raw-fence"
        },
        {
          "include": "#latex-inline"
        }
      ]
    },
    "header-block": {
      "name": "meta.frontmatter.latex.section",
      "begin": "^(\\s*)(header-includes|include-in-header|include-before|include-before-body|include-after|include-after-body)\\s*:\\s*(?:$|(\\|[+-]?|>[+-]?)\\s*$)",
      "beginCaptures": {
        "2": {
          "name": "support.type.property-name.yaml"
        },
        "3": {
          "name": "punctuation.definition.block.scalar.yaml"
        }
      },
      "while": "^(?:(?=\\1\\s)|\\s*$)",
      "patterns": [
        {
          "include": "#list-inline"
        },
        {
          "include": "#list-block"
        },
        {
          "include": "#raw-fence"
        },
        {
          "include": "#latex-inline"
        }
      ]
    },
    "option-inline": {
      "name": "meta.frontmatter.latex.option.inline",
      "begin": "^(\\s*)(documentclass|classoption|geometry|hyperrefoptions|pagestyle|papersize|fontsize|mainfont|mainfontoptions|sansfont|sansfontoptions|monofont|monofontoptions|mathfont|mathfontoptions|CJKmainfont|CJKmainfontoptions)\\s*:\\s*(?=\\S)",
      "beginCaptures": {
        "2": {
          "name": "support.type.property-name.yaml"
        }
      },
      "end": "$",
      "patterns": [
        {
          "include": "#latex-inline"
        }
      ]
    },
    "option-block": {
      "name": "meta.frontmatter.latex.option.section",
      "begin": "^(\\s*)(classoption|geometry|hyperrefoptions|fontfamilyoptions|mainfontoptions|sansfontoptions|monofontoptions|mathfontoptions)\\s*:\\s*$",
      "beginCaptures": {
        "2": {
          "name": "support.type.property-name.yaml"
        }
      },
      "while": "^(?:(?=\\1\\s)|\\s*$)",
      "patterns": [
        {
          "include": "#list-inline"
        },
        {
          "include": "#list-block"
        },
        {
          "include": "#latex-inline"
        }
      ]
    },
    "list-inline": {
      "name": "meta.frontmatter.latex.list-item",
      "begin": "^(\\s*)(-\\s*)(?=.*\\\\)",
      "beginCaptures": {
        "2": {
          "name": "punctuation.definition.sequence.item.yaml"
        }
      },
      "end": "$",
      "patterns": [
        {
          "include": "#latex-inline"
        }
      ]
    },
    "list-block": {
      "name": "meta.frontmatter.latex.list-block",
      "begin": "^(\\s*)(-\\s*)(\\|[+-]?|>[+-]?)\\s*$",
      "beginCaptures": {
        "2": {
          "name": "punctuation.definition.sequence.item.yaml"
        },
        "3": {
          "name": "punctuation.definition.block.scalar.yaml"
        }
      },
      "while": "^(?:(?=\\1\\s{2,})|\\s*$)",
      "patterns": [
        {
          "include": "#latex-inline"
        },
        {
          "include": "#raw-fence"
        }
      ]
    },
    "raw-fence": {
      "name": "markup.raw.block.latex",
      "begin": "^(\\s*)(`{3,}|~{3,})\\{=latex\\}.*$",
      "beginCaptures": {
        "2": {
          "name": "punctuation.definition.fence.begin.markdown"
        }
      },
      "end": "^(\\s*)(\\2)\\s*$",
      "endCaptures": {
        "2": {
          "name": "punctuation.definition.fence.end.markdown"
        }
      },
      "patterns": [
        {
          "include": "text.tex.latex"
        }
      ]
    },
    "latex-inline": {
      "patterns": [
        {
          "name": "support.function.general.latex",
          "match": "\\\\[A-Za-z@]+"
        },
        {
          "name": "constant.character.escape.latex",
          "match": "\\\\[{}$%&#_^~]"
        },
        {
          "name": "constant.language.math.latex",
          "match": "\\\\[()\\[\\]]"
        }
      ]
    }
  }
}
